# 個別支援連絡帳システム

PHP + MySQLで構築した個別支援教育用の連絡帳システムです。

## システム概要

スタッフが毎日の活動記録を生徒ごとに入力し、保護者に共有するための連絡帳システムです。

## 主な機能

- ユーザー認証（管理者、スタッフ、保護者の3種類）
- 参加者選択機能
- 共通活動記録
- 個別の5領域記録
  - 健康・生活
  - 運動・感覚
  - 認知・行動
  - 言語・コミュニケーション
  - 人間関係・社会性
- データの保存・修正機能

## セットアップ手順

### 1. データベースの設定

HETEMLサーバーのMySQL管理画面から、`database.sql`をインポートしてください。

```sql
-- データベース情報
ホスト: mysql320.phy.heteml.lan
データベース名: _kobetudb
ユーザー名: _kobetudb
パスワード: kobetu1234
```

### 2. ファイルのアップロード

全てのファイルをHETEMLサーバーにアップロードしてください。

推奨ディレクトリ構成:
```
/
├── config/
│   └── database.php
├── includes/
│   └── auth.php
├── staff/
│   ├── renrakucho.php
│   ├── renrakucho_form.php
│   └── renrakucho_save.php
├── guardian/
│   └── (今後実装予定)
├── login.php
├── logout.php
└── database.sql
```

### 3. 権限設定

必要に応じて、以下のディレクトリに書き込み権限を設定してください：
- セッションファイル用のディレクトリ（PHPの設定による）

### 4. 初期アカウント

システムには以下のテストアカウントが用意されています：

**管理者**
- ユーザー名: `admin`
- パスワード: `admin123`

**スタッフ**
- ユーザー名: `staff01`
- パスワード: `staff123`

**保護者**
- ユーザー名: `guardian01`
- パスワード: `guardian123`

## 使用方法

### スタッフ用

1. ログインページからスタッフアカウントでログイン
2. 「参加者選択」で本日参加した生徒を選択
3. 「参加者を追加」ボタンをクリック
4. 「本日の活動（共通）」に全員共通の活動を入力
5. 各生徒ごとに5領域から2つ選んで気になったことを記録
6. 「確定して保存」ボタンで保存

### 修正方法

1. 同じ日付で再度アクセスすると、既存の記録が表示されます
2. 参加者を選択し直して「参加者を追加」をクリック
3. フォームに既存データが入力されているので、修正して保存

## データベース構造

### users テーブル
ユーザー情報（管理者、スタッフ、保護者）

### students テーブル
生徒情報

### daily_records テーブル
日次記録（共通活動）

### student_records テーブル
生徒別記録（個別の5領域記録）

## セキュリティ

- パスワードは`password_hash()`でハッシュ化
- セッション管理による認証
- PDOプリペアドステートメントでSQLインジェクション対策
- XSS対策として`htmlspecialchars()`を使用

## 今後の実装予定

- 保護者用の閲覧機能
- 記録の一覧表示
- PDF出力機能
- 管理者用のユーザー管理機能

## トラブルシューティング

### データベース接続エラー

`config/database.php`の接続情報を確認してください。

### ログインできない

- データベースが正しくインポートされているか確認
- テストアカウントの情報が正しいか確認

### セッションエラー

PHPのセッション設定を確認し、セッションファイルの保存先に書き込み権限があるか確認してください。

## サポート

問題が発生した場合は、管理者にお問い合わせください。
